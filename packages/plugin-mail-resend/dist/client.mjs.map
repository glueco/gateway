{"version":3,"sources":["../src/client.ts"],"sourcesContent":["// ============================================\n// RESEND PLUGIN CLIENT\n// Typed client wrapper for target apps\n// ============================================\n//\n// This module provides typed client wrappers for the Resend Email plugin.\n// It depends only on the SDK transport interface and shared contracts.\n//\n// Usage:\n// ```ts\n// import { resend } from \"@glueco/plugin-mail-resend/client\";\n// import { GatewayClient } from \"@glueco/sdk\";\n//\n// const client = new GatewayClient({ ... });\n// const transport = await client.getTransport();\n// const mailClient = resend(transport);\n//\n// const response = await mailClient.emails.send({\n//   from: \"hello@example.com\",\n//   to: \"user@example.com\",\n//   subject: \"Hello!\",\n//   text: \"Hello from Resend!\"\n// });\n// ```\n// ============================================\n\nimport type {\n  GatewayTransport,\n  GatewayResponse,\n  GatewayRequestOptions,\n} from \"@glueco/sdk\";\n\nimport {\n  type SendEmailRequest,\n  type SendEmailResponse,\n  PLUGIN_ID,\n} from \"./contracts\";\n\n// Re-export contracts for consumer convenience\nexport * from \"./contracts\";\n\n// ============================================\n// CLIENT TYPES\n// ============================================\n\n/**\n * Options for email requests.\n */\nexport interface EmailRequestOptions extends Omit<\n  GatewayRequestOptions,\n  \"stream\" | \"method\"\n> {\n  /**\n   * Override for custom behavior (advanced usage).\n   */\n  raw?: boolean;\n}\n\n/**\n * Resend emails namespace interface.\n */\nexport interface ResendEmailsClient {\n  /**\n   * Send a transactional email.\n   *\n   * @param request - Email request payload\n   * @param options - Optional request options\n   * @returns Send email response with email ID\n   *\n   * @example\n   * ```ts\n   * const response = await mailClient.emails.send({\n   *   from: \"notifications@myapp.com\",\n   *   to: \"user@example.com\",\n   *   subject: \"Welcome!\",\n   *   html: \"<h1>Welcome to our app!</h1>\"\n   * });\n   *\n   * console.log(`Email sent with ID: ${response.data.id}`);\n   * ```\n   */\n  send(\n    request: SendEmailRequest,\n    options?: EmailRequestOptions,\n  ): Promise<GatewayResponse<SendEmailResponse>>;\n}\n\n/**\n * Resend client interface.\n * Provides typed methods for all supported actions.\n */\nexport interface ResendClient {\n  /**\n   * Email operations.\n   */\n  emails: ResendEmailsClient;\n\n  /**\n   * Get the underlying transport for advanced usage.\n   * Useful when you need direct access to the gateway.\n   */\n  readonly transport: GatewayTransport;\n}\n\n// ============================================\n// CLIENT FACTORY\n// ============================================\n\n/**\n * Create a typed Resend client.\n *\n * @param transport - Gateway transport from SDK\n * @returns Typed Resend client\n *\n * @example\n * ```ts\n * import { resend } from \"@glueco/plugin-mail-resend/client\";\n * import { GatewayClient } from \"@glueco/sdk\";\n *\n * // Setup\n * const gatewayClient = new GatewayClient({\n *   keyStorage: new FileKeyStorage('./.gateway/keys.json'),\n *   configStorage: new FileConfigStorage('./.gateway/config.json'),\n * });\n *\n * // Get transport and create typed client\n * const transport = await gatewayClient.getTransport();\n * const mailClient = resend(transport);\n *\n * // Send email with full type safety\n * const response = await mailClient.emails.send({\n *   from: \"hello@example.com\",\n *   to: [\"user1@example.com\", \"user2@example.com\"],\n *   subject: \"Important Update\",\n *   html: \"<p>This is an important update.</p>\",\n *   text: \"This is an important update.\",\n *   tags: [{ name: \"category\", value: \"updates\" }]\n * });\n *\n * console.log(`Email sent! ID: ${response.data.id}`);\n * ```\n */\nexport function resend(transport: GatewayTransport): ResendClient {\n  return {\n    transport,\n\n    emails: {\n      async send(\n        request: SendEmailRequest,\n        options?: EmailRequestOptions,\n      ): Promise<GatewayResponse<SendEmailResponse>> {\n        return transport.request<SendEmailResponse, SendEmailRequest>(\n          PLUGIN_ID,\n          \"emails.send\",\n          request,\n          options,\n        );\n      },\n    },\n  };\n}\n\n// Default export for convenient importing\nexport default resend;\n"],"mappings":";;;;;;;;;;;;;;;;;;;AA8IO,SAAS,OAAO,WAA2C;AAChE,SAAO;AAAA,IACL;AAAA,IAEA,QAAQ;AAAA,MACN,MAAM,KACJ,SACA,SAC6C;AAC7C,eAAO,UAAU;AAAA,UACf;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAGA,IAAO,iBAAQ;","names":[]}