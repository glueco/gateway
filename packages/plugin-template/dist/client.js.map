{"version":3,"sources":["../src/client.ts","../src/contracts.ts"],"sourcesContent":["// ============================================\n// TEMPLATE PLUGIN CLIENT\n// Typed client wrapper for target apps\n// ============================================\n//\n// This module provides typed client wrappers for the template plugin.\n// It depends only on the SDK transport interface and shared contracts.\n//\n// IMPORTANT: This entrypoint is for TARGET APPS only.\n// - Do NOT import proxy code here\n// - Do NOT use Node-only APIs\n// - Keep dependencies minimal\n//\n// Usage:\n// ```ts\n// import { template } from \"@glueco/plugin-template/client\";\n// import { GatewayClient } from \"@glueco/sdk\";\n//\n// const client = new GatewayClient({ ... });\n// const transport = await client.getTransport();\n// const templateClient = template(transport);\n//\n// const response = await templateClient.actionOne({\n//   input: \"hello world\"\n// });\n// ```\n// ============================================\n\nimport type {\n  GatewayTransport,\n  GatewayResponse,\n  GatewayRequestOptions,\n} from \"@glueco/sdk\";\n\nimport {\n  type ActionOneRequest,\n  type ActionOneResponse,\n  type ActionTwoRequest,\n  type ActionTwoResponse,\n  PLUGIN_ID,\n} from \"./contracts\";\n\n// Re-export contracts for consumer convenience\nexport * from \"./contracts\";\n\n// ============================================\n// CLIENT TYPES\n// ============================================\n\n/**\n * Options for plugin requests.\n */\nexport interface TemplateRequestOptions\n  extends Omit<GatewayRequestOptions, \"stream\" | \"method\"> {}\n\n/**\n * Template client interface.\n * Provides typed methods for all supported actions.\n */\nexport interface TemplateClient {\n  /**\n   * Execute action.one\n   *\n   * @param request - Action one request\n   * @param options - Optional request options\n   * @returns Action one response\n   *\n   * @example\n   * ```ts\n   * const response = await templateClient.actionOne({\n   *   input: \"hello world\",\n   *   config: { option1: true }\n   * });\n   * console.log(response.data.result);\n   * ```\n   */\n  actionOne(\n    request: ActionOneRequest,\n    options?: TemplateRequestOptions,\n  ): Promise<GatewayResponse<ActionOneResponse>>;\n\n  /**\n   * Execute action.two\n   *\n   * @param request - Action two request\n   * @param options - Optional request options\n   * @returns Action two response\n   *\n   * @example\n   * ```ts\n   * const response = await templateClient.actionTwo({\n   *   data: [\"item1\", \"item2\"],\n   *   options: { limit: 10, format: \"json\" }\n   * });\n   * console.log(response.data.items);\n   * ```\n   */\n  actionTwo(\n    request: ActionTwoRequest,\n    options?: TemplateRequestOptions,\n  ): Promise<GatewayResponse<ActionTwoResponse>>;\n\n  /**\n   * Get the underlying transport for advanced usage.\n   */\n  readonly transport: GatewayTransport;\n}\n\n// ============================================\n// CLIENT FACTORY\n// ============================================\n\n/**\n * Create a typed template client.\n *\n * This factory function creates a client instance that wraps the\n * SDK transport with typed methods for each plugin action.\n *\n * @param transport - Gateway transport from SDK\n * @returns Typed template client\n *\n * @example\n * ```ts\n * import { template } from \"@glueco/plugin-template/client\";\n * import { GatewayClient, FileKeyStorage, FileConfigStorage } from \"@glueco/sdk\";\n *\n * // Setup gateway client\n * const gatewayClient = new GatewayClient({\n *   keyStorage: new FileKeyStorage('./.gateway/keys.json'),\n *   configStorage: new FileConfigStorage('./.gateway/config.json'),\n * });\n *\n * // Get transport and create typed client\n * const transport = await gatewayClient.getTransport();\n * const templateClient = template(transport);\n *\n * // Use with full type safety and autocomplete\n * const response = await templateClient.actionOne({\n *   input: \"hello world\"\n * });\n *\n * // TypeScript knows response.data is ActionOneResponse\n * console.log(response.data.result);\n * console.log(response.data.metadata.processingTime);\n * ```\n */\nexport function template(transport: GatewayTransport): TemplateClient {\n  return {\n    transport,\n\n    async actionOne(\n      request: ActionOneRequest,\n      options?: TemplateRequestOptions,\n    ): Promise<GatewayResponse<ActionOneResponse>> {\n      return transport.request<ActionOneResponse, ActionOneRequest>(\n        PLUGIN_ID,\n        \"action.one\",\n        request,\n        options,\n      );\n    },\n\n    async actionTwo(\n      request: ActionTwoRequest,\n      options?: TemplateRequestOptions,\n    ): Promise<GatewayResponse<ActionTwoResponse>> {\n      return transport.request<ActionTwoResponse, ActionTwoRequest>(\n        PLUGIN_ID,\n        \"action.two\",\n        request,\n        options,\n      );\n    },\n  };\n}\n\n// Default export for convenient importing\nexport default template;\n","// ============================================\n// TEMPLATE PLUGIN CONTRACTS\n// Shared request/response schemas for proxy and client\n// ============================================\n//\n// This file contains the Zod schemas that define the request/response\n// contracts for the plugin. These schemas are shared between:\n// - Proxy (for validation)\n// - Client (for type inference)\n//\n// Guidelines:\n// 1. Keep schemas in this file, not in proxy.ts or client.ts\n// 2. Export both schemas AND inferred types\n// 3. Use descriptive names: <Action>RequestSchema, <Action>ResponseSchema\n// 4. Include constants like PLUGIN_ID, VERSION, ACTIONS here\n//\n// ============================================\n\nimport { z } from \"zod\";\n\n// ============================================\n// REQUEST SCHEMAS\n// Define the structure of incoming requests\n// ============================================\n\n/**\n * Example request schema for action.one\n * Replace with your actual request structure\n */\nexport const ActionOneRequestSchema = z.object({\n  /** Example input field */\n  input: z.string(),\n  /** Optional configuration */\n  config: z\n    .object({\n      option1: z.boolean().optional(),\n      option2: z.number().optional(),\n    })\n    .optional(),\n});\n\nexport type ActionOneRequest = z.infer<typeof ActionOneRequestSchema>;\n\n/**\n * Example request schema for action.two\n */\nexport const ActionTwoRequestSchema = z.object({\n  /** Data to process */\n  data: z.array(z.string()),\n  /** Processing options */\n  options: z\n    .object({\n      limit: z.number().int().positive().optional(),\n      format: z.enum([\"json\", \"text\"]).optional(),\n    })\n    .optional(),\n});\n\nexport type ActionTwoRequest = z.infer<typeof ActionTwoRequestSchema>;\n\n// ============================================\n// RESPONSE SCHEMAS\n// Define the structure of outgoing responses\n// ============================================\n\n/**\n * Example response schema for action.one\n */\nexport const ActionOneResponseSchema = z.object({\n  /** Result of processing */\n  result: z.string(),\n  /** Metadata about the operation */\n  metadata: z.object({\n    processingTime: z.number(),\n    timestamp: z.number(),\n  }),\n});\n\nexport type ActionOneResponse = z.infer<typeof ActionOneResponseSchema>;\n\n/**\n * Example response schema for action.two\n */\nexport const ActionTwoResponseSchema = z.object({\n  /** Processed items */\n  items: z.array(\n    z.object({\n      id: z.string(),\n      value: z.string(),\n    }),\n  ),\n  /** Total count */\n  total: z.number(),\n});\n\nexport type ActionTwoResponse = z.infer<typeof ActionTwoResponseSchema>;\n\n// ============================================\n// PLUGIN CONSTANTS\n// Shared identifiers and configuration\n// ============================================\n\n/**\n * Plugin identifier in format: <resourceType>:<provider>\n */\nexport const PLUGIN_ID = \"example:template\" as const;\n\n/**\n * Resource type category\n */\nexport const RESOURCE_TYPE = \"example\" as const;\n\n/**\n * Provider name\n */\nexport const PROVIDER = \"template\" as const;\n\n/**\n * Plugin version (semver)\n * This is the contract version - target apps can use this\n * to verify compatibility with the proxy plugin version.\n *\n * TODO: Add version compatibility checking in future iteration\n */\nexport const VERSION = \"1.0.0\";\n\n/**\n * Human-readable display name\n */\nexport const NAME = \"Example Template Plugin\";\n\n/**\n * Supported actions\n */\nexport const ACTIONS = [\"action.one\", \"action.two\"] as const;\nexport type TemplateAction = (typeof ACTIONS)[number];\n\n/**\n * Enforcement knobs this plugin supports\n */\nexport const ENFORCEMENT_SUPPORT = [\"field1\", \"field2\"] as const;\n\n/**\n * Default API base URL\n */\nexport const DEFAULT_API_URL = \"https://api.example.com/v1\";\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACkBA,iBAAkB;AAWX,IAAM,yBAAyB,aAAE,OAAO;AAAA;AAAA,EAE7C,OAAO,aAAE,OAAO;AAAA;AAAA,EAEhB,QAAQ,aACL,OAAO;AAAA,IACN,SAAS,aAAE,QAAQ,EAAE,SAAS;AAAA,IAC9B,SAAS,aAAE,OAAO,EAAE,SAAS;AAAA,EAC/B,CAAC,EACA,SAAS;AACd,CAAC;AAOM,IAAM,yBAAyB,aAAE,OAAO;AAAA;AAAA,EAE7C,MAAM,aAAE,MAAM,aAAE,OAAO,CAAC;AAAA;AAAA,EAExB,SAAS,aACN,OAAO;AAAA,IACN,OAAO,aAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS;AAAA,IAC5C,QAAQ,aAAE,KAAK,CAAC,QAAQ,MAAM,CAAC,EAAE,SAAS;AAAA,EAC5C,CAAC,EACA,SAAS;AACd,CAAC;AAYM,IAAM,0BAA0B,aAAE,OAAO;AAAA;AAAA,EAE9C,QAAQ,aAAE,OAAO;AAAA;AAAA,EAEjB,UAAU,aAAE,OAAO;AAAA,IACjB,gBAAgB,aAAE,OAAO;AAAA,IACzB,WAAW,aAAE,OAAO;AAAA,EACtB,CAAC;AACH,CAAC;AAOM,IAAM,0BAA0B,aAAE,OAAO;AAAA;AAAA,EAE9C,OAAO,aAAE;AAAA,IACP,aAAE,OAAO;AAAA,MACP,IAAI,aAAE,OAAO;AAAA,MACb,OAAO,aAAE,OAAO;AAAA,IAClB,CAAC;AAAA,EACH;AAAA;AAAA,EAEA,OAAO,aAAE,OAAO;AAClB,CAAC;AAYM,IAAM,YAAY;AAKlB,IAAM,gBAAgB;AAKtB,IAAM,WAAW;AASjB,IAAM,UAAU;AAKhB,IAAM,OAAO;AAKb,IAAM,UAAU,CAAC,cAAc,YAAY;AAM3C,IAAM,sBAAsB,CAAC,UAAU,QAAQ;AAK/C,IAAM,kBAAkB;;;ADCxB,SAAS,SAAS,WAA6C;AACpE,SAAO;AAAA,IACL;AAAA,IAEA,MAAM,UACJ,SACA,SAC6C;AAC7C,aAAO,UAAU;AAAA,QACf;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAAA,IAEA,MAAM,UACJ,SACA,SAC6C;AAC7C,aAAO,UAAU;AAAA,QACf;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAGA,IAAO,iBAAQ;","names":[]}