{"version":3,"sources":["../src/client.ts"],"sourcesContent":["// ============================================\n// TEMPLATE PLUGIN CLIENT\n// Typed client wrapper for target apps\n// ============================================\n//\n// This module provides typed client wrappers for the template plugin.\n// It depends only on the SDK transport interface and shared contracts.\n//\n// IMPORTANT: This entrypoint is for TARGET APPS only.\n// - Do NOT import proxy code here\n// - Do NOT use Node-only APIs\n// - Keep dependencies minimal\n//\n// Usage:\n// ```ts\n// import { template } from \"@glueco/plugin-template/client\";\n// import { GatewayClient } from \"@glueco/sdk\";\n//\n// const client = new GatewayClient({ ... });\n// const transport = await client.getTransport();\n// const templateClient = template(transport);\n//\n// const response = await templateClient.actionOne({\n//   input: \"hello world\"\n// });\n// ```\n// ============================================\n\nimport type {\n  GatewayTransport,\n  GatewayResponse,\n  GatewayRequestOptions,\n} from \"@glueco/sdk\";\n\nimport {\n  type ActionOneRequest,\n  type ActionOneResponse,\n  type ActionTwoRequest,\n  type ActionTwoResponse,\n  PLUGIN_ID,\n} from \"./contracts\";\n\n// Re-export contracts for consumer convenience\nexport * from \"./contracts\";\n\n// ============================================\n// CLIENT TYPES\n// ============================================\n\n/**\n * Options for plugin requests.\n */\nexport interface TemplateRequestOptions extends Omit<\n  GatewayRequestOptions,\n  \"stream\" | \"method\"\n> {}\n\n/**\n * Template client interface.\n * Provides typed methods for all supported actions.\n */\nexport interface TemplateClient {\n  /**\n   * Execute action.one\n   *\n   * @param request - Action one request\n   * @param options - Optional request options\n   * @returns Action one response\n   *\n   * @example\n   * ```ts\n   * const response = await templateClient.actionOne({\n   *   input: \"hello world\",\n   *   config: { option1: true }\n   * });\n   * console.log(response.data.result);\n   * ```\n   */\n  actionOne(\n    request: ActionOneRequest,\n    options?: TemplateRequestOptions,\n  ): Promise<GatewayResponse<ActionOneResponse>>;\n\n  /**\n   * Execute action.two\n   *\n   * @param request - Action two request\n   * @param options - Optional request options\n   * @returns Action two response\n   *\n   * @example\n   * ```ts\n   * const response = await templateClient.actionTwo({\n   *   data: [\"item1\", \"item2\"],\n   *   options: { limit: 10, format: \"json\" }\n   * });\n   * console.log(response.data.items);\n   * ```\n   */\n  actionTwo(\n    request: ActionTwoRequest,\n    options?: TemplateRequestOptions,\n  ): Promise<GatewayResponse<ActionTwoResponse>>;\n\n  /**\n   * Get the underlying transport for advanced usage.\n   */\n  readonly transport: GatewayTransport;\n}\n\n// ============================================\n// CLIENT FACTORY\n// ============================================\n\n/**\n * Create a typed template client.\n *\n * This factory function creates a client instance that wraps the\n * SDK transport with typed methods for each plugin action.\n *\n * @param transport - Gateway transport from SDK\n * @returns Typed template client\n *\n * @example\n * ```ts\n * import { template } from \"@glueco/plugin-template/client\";\n * import { GatewayClient, FileKeyStorage, FileConfigStorage } from \"@glueco/sdk\";\n *\n * // Setup gateway client\n * const gatewayClient = new GatewayClient({\n *   keyStorage: new FileKeyStorage('./.gateway/keys.json'),\n *   configStorage: new FileConfigStorage('./.gateway/config.json'),\n * });\n *\n * // Get transport and create typed client\n * const transport = await gatewayClient.getTransport();\n * const templateClient = template(transport);\n *\n * // Use with full type safety and autocomplete\n * const response = await templateClient.actionOne({\n *   input: \"hello world\"\n * });\n *\n * // TypeScript knows response.data is ActionOneResponse\n * console.log(response.data.result);\n * console.log(response.data.metadata.processingTime);\n * ```\n */\nexport function template(transport: GatewayTransport): TemplateClient {\n  return {\n    transport,\n\n    async actionOne(\n      request: ActionOneRequest,\n      options?: TemplateRequestOptions,\n    ): Promise<GatewayResponse<ActionOneResponse>> {\n      return transport.request<ActionOneResponse, ActionOneRequest>(\n        PLUGIN_ID,\n        \"action.one\",\n        request,\n        options,\n      );\n    },\n\n    async actionTwo(\n      request: ActionTwoRequest,\n      options?: TemplateRequestOptions,\n    ): Promise<GatewayResponse<ActionTwoResponse>> {\n      return transport.request<ActionTwoResponse, ActionTwoRequest>(\n        PLUGIN_ID,\n        \"action.two\",\n        request,\n        options,\n      );\n    },\n  };\n}\n\n// Default export for convenient importing\nexport default template;\n"],"mappings":";;;;;;;;;;;;;;;;AAoJO,SAAS,SAAS,WAA6C;AACpE,SAAO;AAAA,IACL;AAAA,IAEA,MAAM,UACJ,SACA,SAC6C;AAC7C,aAAO,UAAU;AAAA,QACf;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAAA,IAEA,MAAM,UACJ,SACA,SAC6C;AAC7C,aAAO,UAAU;AAAA,QACf;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAGA,IAAO,iBAAQ;","names":[]}